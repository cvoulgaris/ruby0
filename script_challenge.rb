require 'open-uri'
require 'json'

parsed_json = JSON.parse(open('http://api.wunderground.com/api/4f95be5fb5824d5d/geolookup/conditions/q/CA/San_Francisco.json').read)
# parsed_json1 = {"response"=>{"version"=>"0.1", "termsofService"=>"http://www.wunderground.com/weather/api/d/terms.html", "features"=>{"geolookup"=>1, "conditions"=>1}}, "location"=>{"type"=>"CITY", "country"=>"US", "country_iso3166"=>"US", "country_name"=>"USA", "state"=>"CA", "city"=>"San Francisco", "tz_short"=>"PDT", "tz_long"=>"America/Los_Angeles", "lat"=>"37.77500916", "lon"=>"-122.41825867", "zip"=>"94101", "magic"=>"1", "wmo"=>"99999", "l"=>"/q/zmw:94101.1.99999", "requesturl"=>"US/CA/San_Francisco.html", "wuiurl"=>"http://www.wunderground.com/US/CA/San_Francisco.html", "nearby_weather_stations"=>{"airport"=>{"station"=>[{"city"=>"San Francisco", "state"=>"CA", "country"=>"US", "icao"=>"KSFO", "lat"=>"37.61999893", "lon"=>"-122.37000275"}, {"city"=>"Oakland", "state"=>"CA", "country"=>"US", "icao"=>"KOAK", "lat"=>"37.72000122", "lon"=>"-122.22000122"}, {"city"=>"Hayward", "state"=>"CA", "country"=>"US", "icao"=>"KHWD", "lat"=>"37.65999985", "lon"=>"-122.12000275"}, {"city"=>"Half Moon Bay", "state"=>"CA", "country"=>"US", "icao"=>"KHAF", "lat"=>"37.50999832", "lon"=>"-122.50000000"}]}, "pws"=>{"station"=>[{"neighborhood"=>"SOMA - Near Van Ness", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR58", "lat"=>37.773285, "lon"=>-122.417725, "distance_km"=>0, "distance_mi"=>0}, {"neighborhood"=>"North Mission (Valencia", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR49", "lat"=>37.770599, "lon"=>-122.4235, "distance_km"=>0, "distance_mi"=>0}, {"neighborhood"=>"SOMA", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR131", "lat"=>37.778488, "lon"=>-122.408005, "distance_km"=>0, "distance_mi"=>0}, {"neighborhood"=>"HADS SAN FRANCISCO DOWNTOWN CA US NWS", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"MSFOC1", "lat"=>37.76944, "lon"=>-122.434441, "distance_km"=>1, "distance_mi"=>0}, {"neighborhood"=>"SoMa", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR113", "lat"=>37.779114, "lon"=>-122.398003, "distance_km"=>1, "distance_mi"=>1}, {"neighborhood"=>"Castro/San Francisco", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KPCASANF2", "lat"=>37.759239, "lon"=>-122.43042, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"The Castro", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR114", "lat"=>37.759777, "lon"=>-122.431648, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"China Basin Landing", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR14", "lat"=>37.776222, "lon"=>-122.391571, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"The Mission: Even the weather is hip", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR79", "lat"=>37.754234, "lon"=>-122.411728, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Drew School", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR155", "lat"=>37.787407, "lon"=>-122.442177, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Financial District", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR102", "lat"=>37.793579, "lon"=>-122.39933, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Town School For Boys", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR146", "lat"=>37.791943, "lon"=>-122.43972, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"APRSWXNET San Francisco CA US", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"ME1927", "lat"=>37.756001, "lon"=>-122.39917, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Noe Valley", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR86", "lat"=>37.753548, "lon"=>-122.433846, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Noe Valley", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR3", "lat"=>37.753109, "lon"=>-122.433525, "distance_km"=>2, "distance_mi"=>1}, {"neighborhood"=>"Cole Valley", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR110", "lat"=>37.760796, "lon"=>-122.449608, "distance_km"=>3, "distance_mi"=>1}, {"neighborhood"=>"Diamond Heights", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR76", "lat"=>37.754002, "lon"=>-122.44278, "distance_km"=>3, "distance_mi"=>1}, {"neighborhood"=>"NOS_PORTS Pier 1, CA", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"MPXOC1", "lat"=>37.798, "lon"=>-122.392975, "distance_km"=>3, "distance_mi"=>2}, {"neighborhood"=>"Noe Valley (South)", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR98", "lat"=>37.745663, "lon"=>-122.430214, "distance_km"=>3, "distance_mi"=>2}, {"neighborhood"=>"Noe Valley/Diamond Heights/Twin Peaks", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR150", "lat"=>37.748165, "lon"=>-122.44323, "distance_km"=>3, "distance_mi"=>2}, {"neighborhood"=>"Billy Goat Hill", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR73", "lat"=>37.741833, "lon"=>-122.433586, "distance_km"=>3, "distance_mi"=>2}, {"neighborhood"=>"Midtown Terrace", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR151", "lat"=>37.752998, "lon"=>-122.454002, "distance_km"=>3, "distance_mi"=>2}, {"neighborhood"=>"inner sunset", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR156", "lat"=>37.76498, "lon"=>-122.462303, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Presidio", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR148", "lat"=>37.801765, "lon"=>-122.45076, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Twin Peaks", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR34", "lat"=>37.748829, "lon"=>-122.453499, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"APRSWXNET San Francisco CA US", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"MC9629", "lat"=>37.735199, "lon"=>-122.442589, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Mid Richmond", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR128", "lat"=>37.782398, "lon"=>-122.471497, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Golden Gate Heights", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR46", "lat"=>37.752174, "lon"=>-122.465805, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Glen Park", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR111", "lat"=>37.733135, "lon"=>-122.437584, "distance_km"=>4, "distance_mi"=>2}, {"neighborhood"=>"Portola", "city"=>"San Francisco", "state"=>"CA", "country"=>"US", "id"=>"KCASANFR135", "lat"=>37.729885, "lon"=>-122.417633, "distance_km"=>5, "distance_mi"=>3}]}}}, "current_observation"=>{"image"=>{"url"=>"http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png", "title"=>"Weather Underground", "link"=>"http://www.wunderground.com"}, "display_location"=>{"full"=>"San Francisco, CA", "city"=>"San Francisco", "state"=>"CA", "state_name"=>"California", "country"=>"US", "country_iso3166"=>"US", "zip"=>"94101", "latitude"=>"37.77500916", "longitude"=>"-122.41825867", "elevation"=>"47.00000000"}, "observation_location"=>{"full"=>"SOMA - Near Van Ness, San Francisco, California", "city"=>"SOMA - Near Van Ness, San Francisco", "state"=>"California", "country"=>"US", "country_iso3166"=>"US", "latitude"=>"37.773285", "longitude"=>"-122.417725", "elevation"=>"49 ft"}, "estimated"=>{}, "station_id"=>"KCASANFR58", "observation_time"=>"Last Updated on May 9, 8:40 PM PDT", "observation_time_rfc822"=>"Thu, 09 May 2013 20:40:32 -0700", "observation_epoch"=>"1368157232", "local_time_rfc822"=>"Thu, 09 May 2013 20:40:54 -0700", "local_epoch"=>"1368157254", "local_tz_short"=>"PDT", "local_tz_long"=>"America/Los_Angeles", "local_tz_offset"=>"-0700", "weather"=>"Overcast", "temperature_string"=>"54.0 F (12.2 C)", "temp_f"=>54.0, "temp_c"=>12.2, "relative_humidity"=>"84%", "wind_string"=>"From the SE at 2.0 MPH", "wind_dir"=>"SE", "wind_degrees"=>145, "wind_mph"=>2.0, "wind_gust_mph"=>0, "wind_kph"=>3.2, "wind_gust_kph"=>0, "pressure_mb"=>"1022", "pressure_in"=>"30.17", "pressure_trend"=>"+", "dewpoint_string"=>"49 F (10 C)", "dewpoint_f"=>49, "dewpoint_c"=>10, "heat_index_string"=>"NA", "heat_index_f"=>"NA", "heat_index_c"=>"NA", "windchill_string"=>"NA", "windchill_f"=>"NA", "windchill_c"=>"NA", "feelslike_string"=>"54.0 F (12.2 C)", "feelslike_f"=>"54.0", "feelslike_c"=>"12.2", "visibility_mi"=>"10.0", "visibility_km"=>"16.1", "solarradiation"=>"", "UV"=>"0", "precip_1hr_string"=>"0.00 in ( 0 mm)", "precip_1hr_in"=>"0.00", "precip_1hr_metric"=>" 0", "precip_today_string"=>"0.00 in (0 mm)", "precip_today_in"=>"0.00", "precip_today_metric"=>"0", "icon"=>"cloudy", "icon_url"=>"http://icons-ak.wxug.com/i/c/k/nt_cloudy.gif", "forecast_url"=>"http://www.wunderground.com/US/CA/San_Francisco.html", "history_url"=>"http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=KCASANFR58", "ob_url"=>"http://www.wunderground.com/cgi-bin/findweather/getForecast?query=37.773285,-122.417725"}}
# puts parsed_json1.keys

location = parsed_json["location"]
city = location["city"]

current_observation = parsed_json["current_observation"]
weather_string = current_observation["temperature_string"]

puts "#{weather_string} #{city} " 
# @names = @people.collect { |key| key["name"]}